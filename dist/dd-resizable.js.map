{"version":3,"file":"dd-resizable.js","sourceRoot":"","sources":["../src/dd-resizable.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * dd-resizable.ts 7.3.0\r\n * Copyright (c) 2021-2022 Alain Dumesny - see GridStack root license\r\n */\r\n\r\nimport { DDResizableHandle } from './dd-resizable-handle';\r\nimport { DDBaseImplement, HTMLElementExtendOpt } from './dd-base-impl';\r\nimport { Utils } from './utils';\r\nimport { DDUIData, Rect, Size } from './types';\r\nimport { DDManager } from './dd-manager';\r\n\r\n// import { GridItemHTMLElement } from './types'; let count = 0; // TEST\r\n\r\n// TODO: merge with DDDragOpt\r\nexport interface DDResizableOpt {\r\n  autoHide?: boolean;\r\n  handles?: string;\r\n  maxHeight?: number;\r\n  maxWidth?: number;\r\n  minHeight?: number;\r\n  minWidth?: number;\r\n  start?: (event: Event, ui: DDUIData) => void;\r\n  stop?: (event: Event) => void;\r\n  resize?: (event: Event, ui: DDUIData) => void;\r\n}\r\n\r\nexport class DDResizable extends DDBaseImplement implements HTMLElementExtendOpt<DDResizableOpt> {\r\n\r\n  // have to be public else complains for HTMLElementExtendOpt ?\r\n  public el: HTMLElement;\r\n  public option: DDResizableOpt;\r\n\r\n  /** @internal */\r\n  protected handlers: DDResizableHandle[];\r\n  /** @internal */\r\n  protected originalRect: Rect;\r\n  /** @internal */\r\n  protected temporalRect: Rect;\r\n  /** @internal */\r\n  protected scrollY: number;\r\n  /** @internal */\r\n  protected scrolled: number;\r\n  /** @internal */\r\n  protected scrollEl: HTMLElement;\r\n  /** @internal */\r\n  protected startEvent: MouseEvent;\r\n  /** @internal value saved in the same order as _originStyleProp[] */\r\n  protected elOriginStyleVal: string[];\r\n  /** @internal */\r\n  protected parentOriginStylePosition: string;\r\n  /** @internal */\r\n  protected static _originStyleProp = ['width', 'height', 'position', 'left', 'top', 'opacity', 'zIndex'];\r\n\r\n  constructor(el: HTMLElement, opts: DDResizableOpt = {}) {\r\n    super();\r\n    this.el = el;\r\n    this.option = opts;\r\n    // create var event binding so we can easily remove and still look like TS methods (unlike anonymous functions)\r\n    this._mouseOver = this._mouseOver.bind(this);\r\n    this._mouseOut = this._mouseOut.bind(this);\r\n    this.enable();\r\n    this._setupAutoHide(this.option.autoHide);\r\n    this._setupHandlers();\r\n  }\r\n\r\n  public on(event: 'resizestart' | 'resize' | 'resizestop', callback: (event: DragEvent) => void): void {\r\n    super.on(event, callback);\r\n  }\r\n\r\n  public off(event: 'resizestart' | 'resize' | 'resizestop'): void {\r\n    super.off(event);\r\n  }\r\n\r\n  public enable(): void {\r\n    super.enable();\r\n    this.el.classList.add('ui-resizable');\r\n    this.el.classList.remove('ui-resizable-disabled');\r\n    this._setupAutoHide(this.option.autoHide);\r\n  }\r\n\r\n  public disable(): void {\r\n    super.disable();\r\n    this.el.classList.add('ui-resizable-disabled');\r\n    this.el.classList.remove('ui-resizable');\r\n    this._setupAutoHide(false);\r\n  }\r\n\r\n  public destroy(): void {\r\n    this._removeHandlers();\r\n    this._setupAutoHide(false);\r\n    this.el.classList.remove('ui-resizable');\r\n    delete this.el;\r\n    super.destroy();\r\n  }\r\n\r\n  public updateOption(opts: DDResizableOpt): DDResizable {\r\n    let updateHandles = (opts.handles && opts.handles !== this.option.handles);\r\n    let updateAutoHide = (opts.autoHide && opts.autoHide !== this.option.autoHide);\r\n    Object.keys(opts).forEach(key => this.option[key] = opts[key]);\r\n    if (updateHandles) {\r\n      this._removeHandlers();\r\n      this._setupHandlers();\r\n    }\r\n    if (updateAutoHide) {\r\n      this._setupAutoHide(this.option.autoHide);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @internal turns auto hide on/off */\r\n  protected _setupAutoHide(auto: boolean): DDResizable {\r\n    if (auto) {\r\n      this.el.classList.add('ui-resizable-autohide');\r\n      // use mouseover and not mouseenter to get better performance and track for nested cases\r\n      this.el.addEventListener('mouseover', this._mouseOver);\r\n      this.el.addEventListener('mouseout', this._mouseOut);\r\n    } else {\r\n      this.el.classList.remove('ui-resizable-autohide');\r\n      this.el.removeEventListener('mouseover', this._mouseOver);\r\n      this.el.removeEventListener('mouseout', this._mouseOut);\r\n      if (DDManager.overResizeElement === this) {\r\n        delete DDManager.overResizeElement;\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected _mouseOver(e: Event): void {\r\n    // console.log(`${count++} pre-enter ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\r\n    // already over a child, ignore. Ideally we just call e.stopPropagation() but see https://github.com/gridstack/gridstack.js/issues/2018\r\n    if (DDManager.overResizeElement || DDManager.dragElement) return;\r\n    DDManager.overResizeElement = this;\r\n    // console.log(`${count++} enter ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\r\n    this.el.classList.remove('ui-resizable-autohide');\r\n  }\r\n\r\n  /** @internal */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected _mouseOut(e: Event): void {\r\n    // console.log(`${count++} pre-leave ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\r\n    if (DDManager.overResizeElement !== this) return;\r\n    delete DDManager.overResizeElement;\r\n    // console.log(`${count++} leave ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\r\n    this.el.classList.add('ui-resizable-autohide');\r\n  }\r\n\r\n  /** @internal */\r\n  protected _setupHandlers(): DDResizable {\r\n    let handlerDirection = this.option.handles || 'e,s,se';\r\n    if (handlerDirection === 'all') {\r\n      handlerDirection = 'n,e,s,w,se,sw,ne,nw';\r\n    }\r\n    this.handlers = handlerDirection.split(',')\r\n      .map(dir => dir.trim())\r\n      .map(dir => new DDResizableHandle(this.el, dir, {\r\n        start: (event: MouseEvent) => {\r\n          this._resizeStart(event);\r\n        },\r\n        stop: (event: MouseEvent) => {\r\n          this._resizeStop(event);\r\n        },\r\n        move: (event: MouseEvent) => {\r\n          this._resizing(event, dir);\r\n        }\r\n      }));\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _resizeStart(event: MouseEvent): DDResizable {\r\n    this.originalRect = this.el.getBoundingClientRect();\r\n    this.scrollEl = Utils.getScrollElement(this.el);\r\n    this.scrollY = this.scrollEl.scrollTop;\r\n    this.scrolled = 0;\r\n    this.startEvent = event;\r\n    this._setupHelper();\r\n    this._applyChange();\r\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resizestart', target: this.el });\r\n    if (this.option.start) {\r\n      this.option.start(ev, this._ui());\r\n    }\r\n    this.el.classList.add('ui-resizable-resizing');\r\n    this.triggerEvent('resizestart', ev);\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _resizing(event: MouseEvent, dir: string): DDResizable {\r\n    this.scrolled = this.scrollEl.scrollTop - this.scrollY;\r\n    this.temporalRect = this._getChange(event, dir);\r\n    this._applyChange();\r\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resize', target: this.el });\r\n    if (this.option.resize) {\r\n      this.option.resize(ev, this._ui());\r\n    }\r\n    this.triggerEvent('resize', ev);\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _resizeStop(event: MouseEvent): DDResizable {\r\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resizestop', target: this.el });\r\n    if (this.option.stop) {\r\n      this.option.stop(ev); // Note: ui() not used by gridstack so don't pass\r\n    }\r\n    this.el.classList.remove('ui-resizable-resizing');\r\n    this.triggerEvent('resizestop', ev);\r\n    this._cleanHelper();\r\n    delete this.startEvent;\r\n    delete this.originalRect;\r\n    delete this.temporalRect;\r\n    delete this.scrollY;\r\n    delete this.scrolled;\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _setupHelper(): DDResizable {\r\n    this.elOriginStyleVal = DDResizable._originStyleProp.map(prop => this.el.style[prop]);\r\n    this.parentOriginStylePosition = this.el.parentElement.style.position;\r\n    if (window.getComputedStyle(this.el.parentElement).position.match(/static/)) {\r\n      this.el.parentElement.style.position = 'relative';\r\n    }\r\n    this.el.style.position = 'absolute';\r\n    this.el.style.opacity = '0.8';\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _cleanHelper(): DDResizable {\r\n    DDResizable._originStyleProp.forEach((prop, i) => {\r\n      this.el.style[prop] = this.elOriginStyleVal[i] || null;\r\n    });\r\n    this.el.parentElement.style.position = this.parentOriginStylePosition || null;\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _getChange(event: MouseEvent, dir: string): Rect {\r\n    const oEvent = this.startEvent;\r\n    const newRect = { // Note: originalRect is a complex object, not a simple Rect, so copy out.\r\n      width: this.originalRect.width,\r\n      height: this.originalRect.height + this.scrolled,\r\n      left: this.originalRect.left,\r\n      top: this.originalRect.top - this.scrolled\r\n    };\r\n\r\n    const offsetX = event.clientX - oEvent.clientX;\r\n    const offsetY = event.clientY - oEvent.clientY;\r\n\r\n    if (dir.indexOf('e') > -1) {\r\n      newRect.width += offsetX;\r\n    } else if (dir.indexOf('w') > -1) {\r\n      newRect.width -= offsetX;\r\n      newRect.left += offsetX;\r\n    }\r\n    if (dir.indexOf('s') > -1) {\r\n      newRect.height += offsetY;\r\n    } else if (dir.indexOf('n') > -1) {\r\n      newRect.height -= offsetY;\r\n      newRect.top += offsetY\r\n    }\r\n    const constrain = this._constrainSize(newRect.width, newRect.height);\r\n    if (Math.round(newRect.width) !== Math.round(constrain.width)) { // round to ignore slight round-off errors\r\n      if (dir.indexOf('w') > -1) {\r\n        newRect.left += newRect.width - constrain.width;\r\n      }\r\n      newRect.width = constrain.width;\r\n    }\r\n    if (Math.round(newRect.height) !== Math.round(constrain.height)) {\r\n      if (dir.indexOf('n') > -1) {\r\n        newRect.top += newRect.height - constrain.height;\r\n      }\r\n      newRect.height = constrain.height;\r\n    }\r\n    return newRect;\r\n  }\r\n\r\n  /** @internal constrain the size to the set min/max values */\r\n  protected _constrainSize(oWidth: number, oHeight: number): Size {\r\n    const maxWidth = this.option.maxWidth || Number.MAX_SAFE_INTEGER;\r\n    const minWidth = this.option.minWidth || oWidth;\r\n    const maxHeight = this.option.maxHeight || Number.MAX_SAFE_INTEGER;\r\n    const minHeight = this.option.minHeight || oHeight;\r\n    const width = Math.min(maxWidth, Math.max(minWidth, oWidth));\r\n    const height = Math.min(maxHeight, Math.max(minHeight, oHeight));\r\n    return { width, height };\r\n  }\r\n\r\n  /** @internal */\r\n  protected _applyChange(): DDResizable {\r\n    let containmentRect = { left: 0, top: 0, width: 0, height: 0 };\r\n    if (this.el.style.position === 'absolute') {\r\n      const containmentEl = this.el.parentElement;\r\n      const { left, top } = containmentEl.getBoundingClientRect();\r\n      containmentRect = { left, top, width: 0, height: 0 };\r\n    }\r\n    if (!this.temporalRect) return this;\r\n    Object.keys(this.temporalRect).forEach(key => {\r\n      const value = this.temporalRect[key];\r\n      this.el.style[key] = value - containmentRect[key] + 'px';\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _removeHandlers(): DDResizable {\r\n    this.handlers.forEach(handle => handle.destroy());\r\n    delete this.handlers;\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _ui = (): DDUIData => {\r\n    const containmentEl = this.el.parentElement;\r\n    const containmentRect = containmentEl.getBoundingClientRect();\r\n    const newRect = { // Note: originalRect is a complex object, not a simple Rect, so copy out.\r\n      width: this.originalRect.width,\r\n      height: this.originalRect.height + this.scrolled,\r\n      left: this.originalRect.left,\r\n      top: this.originalRect.top - this.scrolled\r\n    };\r\n    const rect = this.temporalRect || newRect;\r\n    return {\r\n      position: {\r\n        left: rect.left - containmentRect.left,\r\n        top: rect.top - containmentRect.top\r\n      },\r\n      size: {\r\n        width: rect.width,\r\n        height: rect.height\r\n      }\r\n      /* Gridstack ONLY needs position set above... keep around in case.\r\n      element: [this.el], // The object representing the element to be resized\r\n      helper: [], // TODO: not support yet - The object representing the helper that's being resized\r\n      originalElement: [this.el],// we don't wrap here, so simplify as this.el //The object representing the original element before it is wrapped\r\n      originalPosition: { // The position represented as { left, top } before the resizable is resized\r\n        left: this.originalRect.left - containmentRect.left,\r\n        top: this.originalRect.top - containmentRect.top\r\n      },\r\n      originalSize: { // The size represented as { width, height } before the resizable is resized\r\n        width: this.originalRect.width,\r\n        height: this.originalRect.height\r\n      }\r\n      */\r\n    };\r\n  }\r\n}\r\n"]}